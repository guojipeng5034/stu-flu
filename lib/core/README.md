# Core åŸºç¡€è®¾æ–½å±‚

Core å±‚æ˜¯é¡¹ç›®çš„åŸºç¡€è®¾æ–½å±‚ï¼Œæä¾›çº¯æŠ€æœ¯æ€§çš„ç»„ä»¶å’Œå·¥å…·ï¼Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚è¿™äº›ç»„ä»¶å¯ä»¥è¢«é¡¹ç›®ä¸­çš„ä»»ä½•å±‚ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–é¡¹ç›®ä¸­å¤ç”¨ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
lib/core/
â”œâ”€â”€ README.md                              # ğŸ“š æœ¬æ–‡ä»¶
â”œâ”€â”€ index.dart                             # ğŸ”— ç»Ÿä¸€å¯¼å‡º
â”‚
â”œâ”€â”€ di/                                    # ğŸ’‰ ä¾èµ–æ³¨å…¥
â”‚   â””â”€â”€ di.dart                            # Riverpod ä¾èµ–æ³¨å…¥é…ç½®
â”‚
â”œâ”€â”€ error/                                 # âŒ é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ error_handler.dart                 # å…¨å±€é”™è¯¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ exceptions.dart                    # è‡ªå®šä¹‰å¼‚å¸¸ç±»
â”‚   â”œâ”€â”€ failure.dart                       # å¤±è´¥ç±»å®šä¹‰
â”‚   â””â”€â”€ index.dart                         # é”™è¯¯å¤„ç†å¯¼å‡º
â”‚
â”œâ”€â”€ mapping/                               # ğŸ”„ æ•°æ®æ˜ å°„
â”‚   â””â”€â”€ mappable_config.dart               # dart_mappable å…¨å±€é…ç½®
â”‚
â”œâ”€â”€ network/                               # ğŸŒ ç½‘ç»œåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ config/                            # ç½‘ç»œé…ç½®
â”‚   â”œâ”€â”€ interceptors/                      # ç½‘ç»œæ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ auth_interceptor.dart          # è®¤è¯æ‹¦æˆªå™¨
â”‚   â”‚   â””â”€â”€ logging_interceptor.dart       # æ—¥å¿—æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ converters/                        # æ•°æ®è½¬æ¢å™¨
â”‚   â”œâ”€â”€ events/                            # ç½‘ç»œäº‹ä»¶
â”‚   â”‚   â””â”€â”€ auth_events.dart               # è®¤è¯ç›¸å…³äº‹ä»¶
â”‚   â””â”€â”€ retrofit/                          # API å®¢æˆ·ç«¯
â”‚       â””â”€â”€ api_manager.dart               # API ç®¡ç†å™¨
â”‚
â”œâ”€â”€ storage/                               # ğŸ’¾ å­˜å‚¨åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ storage_service.dart               # å­˜å‚¨æœåŠ¡æ¥å£
â”‚   â””â”€â”€ secure_storage.dart                # å®‰å…¨å­˜å‚¨å®ç°
â”‚
â”œâ”€â”€ localization/                          # ğŸŒ æœ¬åœ°åŒ–åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ config/                            # æœ¬åœ°åŒ–é…ç½®
â”‚   â”‚   â””â”€â”€ localization_config.dart       # æœ¬åœ°åŒ–é…ç½®ç±»
â”‚   â”œâ”€â”€ extensions/                        # æ‰©å±•æ–¹æ³•
â”‚   â”‚   â””â”€â”€ app_localizations_extension.dart # æœ¬åœ°åŒ–æ‰©å±•
â”‚   â””â”€â”€ utils/                             # æœ¬åœ°åŒ–å·¥å…·
â”‚       â””â”€â”€ localization_utils.dart        # æœ¬åœ°åŒ–å·¥å…·ç±»
â”‚
â”œâ”€â”€ logger/                                # ğŸ“ æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ app_logger.dart                    # åº”ç”¨æ—¥å¿—å™¨
â”‚   â”œâ”€â”€ log_interceptor.dart               # æ—¥å¿—æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ log_examples.dart                  # æ—¥å¿—ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ README.md                          # æ—¥å¿—ç³»ç»Ÿè¯´æ˜
â”‚   â””â”€â”€ index.dart                         # æ—¥å¿—ç³»ç»Ÿå¯¼å‡º
â”‚
â”œâ”€â”€ time/                                  # â° æ—¶é—´å·¥å…·
â”‚   â”œâ”€â”€ time_util.dart                     # æ—¶é—´å·¥å…·ç±»
â”‚   â”œâ”€â”€ streaming_time_util.dart           # æµå¼æ—¶é—´å·¥å…·
â”‚   â””â”€â”€ index.dart                         # æ—¶é—´å·¥å…·å¯¼å‡º
â”‚
â”œâ”€â”€ extensions/                            # ğŸ”§ æ‰©å±•æ–¹æ³•
â”‚   â”œâ”€â”€ string_extensions.dart             # å­—ç¬¦ä¸²æ‰©å±•æ–¹æ³•
â”‚   â”œâ”€â”€ datetime_extensions.dart           # æ—¥æœŸæ—¶é—´æ‰©å±•æ–¹æ³•
â”‚   â””â”€â”€ index.dart                         # æ‰©å±•æ–¹æ³•å¯¼å‡º
â”‚
â””â”€â”€ platform/                             # ğŸ“± å¹³å°ç›¸å…³å·¥å…·
    â”œâ”€â”€ device_info.dart                   # è®¾å¤‡ä¿¡æ¯å·¥å…·
    â””â”€â”€ index.dart                         # å¹³å°å·¥å…·å¯¼å‡º
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### âœ… Core å±‚åº”è¯¥åŒ…å«çš„å†…å®¹
- **çº¯æŠ€æœ¯æ€§ç»„ä»¶** - ä¸æ¡†æ¶ã€å¹³å°ã€åŸºç¡€è®¾æ–½ç›¸å…³
- **æ— ä¸šåŠ¡ä¾èµ–** - ä¸ä¾èµ–ä»»ä½•ä¸šåŠ¡æ¨¡å‹æˆ–é€»è¾‘
- **é«˜å¤ç”¨æ€§** - å¯ä»¥åœ¨å…¶ä»–é¡¹ç›®ä¸­ç›´æ¥å¤ç”¨
- **åŸºç¡€åŠŸèƒ½** - ç½‘ç»œã€å­˜å‚¨ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ç­‰

### âŒ Core å±‚ä¸åº”è¯¥åŒ…å«çš„å†…å®¹
- **ä¸šåŠ¡é€»è¾‘** - ä¸ç‰¹å®šä¸šåŠ¡ç›¸å…³çš„å¤„ç†
- **ä¸šåŠ¡æ¨¡å‹** - ç‰¹å®šäºä¸šåŠ¡é¢†åŸŸçš„æ•°æ®æ¨¡å‹
- **UI ç»„ä»¶** - ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ç»„ä»¶
- **é¡µé¢é€»è¾‘** - ç‰¹å®šé¡µé¢çš„å¤„ç†é€»è¾‘

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### ç»Ÿä¸€å¯¼å…¥ (æ¨è)
```dart
import 'package:cptop/core/index.dart';

// ä½¿ç”¨æ—¥å¿—
Log.i('This is an info message');

// ä½¿ç”¨æ—¶é—´å·¥å…·
final currentTime = await TimeUtil.getCurrentTime();

// ä½¿ç”¨æ‰©å±•æ–¹æ³•
final email = 'test@example.com';
if (email.isValidEmail) {
  print('Valid email');
}

// ä½¿ç”¨å¹³å°å·¥å…·
if (DeviceInfo.isMobile) {
  print('Running on mobile');
}
```

### åˆ†åˆ«å¯¼å…¥
```dart
// åªå¯¼å…¥æ—¥å¿—ç³»ç»Ÿ
import 'package:cptop/core/logger/index.dart';

// åªå¯¼å…¥æ—¶é—´å·¥å…·
import 'package:cptop/core/time/index.dart';

// åªå¯¼å…¥æ‰©å±•æ–¹æ³•
import 'package:cptop/core/extensions/index.dart';

// åªå¯¼å…¥å¹³å°å·¥å…·
import 'package:cptop/core/platform/index.dart';
```

## ğŸ“š ç»„ä»¶è¯´æ˜

### ğŸ’‰ ä¾èµ–æ³¨å…¥ (di/)
- åŸºäº Riverpod çš„ä¾èµ–æ³¨å…¥é…ç½®
- æä¾›å…¨å±€çš„æœåŠ¡æä¾›è€…
- ç®¡ç†åº”ç”¨ç¨‹åºçš„ä¾èµ–å…³ç³»

### âŒ é”™è¯¯å¤„ç† (error/)
- å…¨å±€é”™è¯¯å¤„ç†å™¨
- è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹
- é”™è¯¯æ—¥å¿—è®°å½•

### ğŸ”„ æ•°æ®æ˜ å°„ (mapping/)
- dart_mappable å…¨å±€é…ç½®
- æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–è®¾ç½®
- JSON è½¬æ¢é…ç½®

### ğŸŒ ç½‘ç»œåŸºç¡€è®¾æ–½ (network/)
- HTTP å®¢æˆ·ç«¯é…ç½®
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- API ç®¡ç†å™¨
- ç½‘ç»œäº‹ä»¶å¤„ç†

### ğŸ’¾ å­˜å‚¨åŸºç¡€è®¾æ–½ (storage/)
- æœ¬åœ°å­˜å‚¨æœåŠ¡æ¥å£
- å®‰å…¨å­˜å‚¨å®ç°
- ç¼“å­˜ç®¡ç†

### ğŸŒ æœ¬åœ°åŒ–åŸºç¡€è®¾æ–½ (localization/)
- æœ¬åœ°åŒ–é…ç½®ç®¡ç†
- æ‰©å±•æ–¹æ³•
- å·¥å…·å‡½æ•°

### ğŸ“ æ—¥å¿—ç³»ç»Ÿ (logger/)
- ç»Ÿä¸€çš„æ—¥å¿—æ¥å£
- å¤šçº§åˆ«æ—¥å¿—è¾“å‡º
- æ—¥å¿—æ ¼å¼åŒ–
- ç½‘ç»œè¯·æ±‚æ—¥å¿—

### â° æ—¶é—´å·¥å…· (time/)
- NTP æ—¶é—´åŒæ­¥
- å®æ—¶æ—¶é—´æµ
- æ—¶é—´æ ¼å¼åŒ–
- æ—¶åŒºå¤„ç†

### ğŸ”§ æ‰©å±•æ–¹æ³• (extensions/)
- å­—ç¬¦ä¸²æ‰©å±• (éªŒè¯ã€è½¬æ¢ã€æ ¼å¼åŒ–)
- æ—¥æœŸæ—¶é—´æ‰©å±• (è®¡ç®—ã€åˆ¤æ–­ã€æ ¼å¼åŒ–)
- å…¶ä»– Dart ç±»å‹æ‰©å±•

### ğŸ“± å¹³å°å·¥å…· (platform/)
- è®¾å¤‡ä¿¡æ¯è·å–
- å¹³å°æ£€æµ‹
- ç¯å¢ƒå˜é‡è®¿é—®
- è°ƒè¯•æ¨¡å¼åˆ¤æ–­

## ğŸš€ æ·»åŠ æ–°ç»„ä»¶

### 1. ç¡®å®šç»„ä»¶ç±»å‹
ç¡®ä¿æ–°ç»„ä»¶ç¬¦åˆ Core å±‚çš„è®¾è®¡åŸåˆ™ï¼š
- çº¯æŠ€æœ¯æ€§
- æ— ä¸šåŠ¡ä¾èµ–
- é«˜å¤ç”¨æ€§

### 2. åˆ›å»ºç»„ä»¶ç›®å½•
```bash
mkdir lib/core/new_component
```

### 3. å®ç°ç»„ä»¶
```dart
// lib/core/new_component/new_component.dart
class NewComponent {
  // å®ç°ç»„ä»¶åŠŸèƒ½
}
```

### 4. åˆ›å»ºå¯¼å‡ºæ–‡ä»¶
```dart
// lib/core/new_component/index.dart
export 'new_component.dart';
```

### 5. æ›´æ–°ç»Ÿä¸€å¯¼å‡º
```dart
// lib/core/index.dart
export 'new_component/index.dart';
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¿æŒçº¯å‡€æ€§** - ä¸è¦åœ¨ Core å±‚å¼•å…¥ä¸šåŠ¡é€»è¾‘
2. **æ–‡æ¡£å®Œå–„** - ä¸ºæ¯ä¸ªç»„ä»¶æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Š
3. **æµ‹è¯•è¦†ç›–** - ä¸ºç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•
4. **æ€§èƒ½è€ƒè™‘** - æ³¨æ„ç»„ä»¶çš„æ€§èƒ½å½±å“
5. **å‘åå…¼å®¹** - ä¿®æ”¹ç°æœ‰ç»„ä»¶æ—¶è¦è€ƒè™‘å‘åå…¼å®¹æ€§

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ä¸šåŠ¡å·¥å…·å±‚ (lib/utils/)](../utils/README.md)
- [API æ•°æ®è®¿é—®å±‚ (lib/api/)](../api/README.md)
- [é¡¹ç›®æ¶æ„æ–‡æ¡£](../../docs/architecture.md)
